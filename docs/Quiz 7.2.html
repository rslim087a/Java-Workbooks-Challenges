<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>

    <link rel="stylesheet" href="quiz-styles.css">
  </head>

  <body onload="main()">
    <div id="score" class="score">
      <span>Score: N/A of N/A</span>
    </div>
    <div id="quiz-container" class="quiz-content"></div>

    <script>
      const quizData = {"pass_percent": 70, "questions": [{"_class": "assessment", "id": 58660978, "assessment_type": "multiple-choice", "prompt": {"question": "<p>When you encounter a challenging quiz question, it's a good idea to apply the same logic in Visual Studio Code. Use breakpoints to step through the code and visualize the process line by line. Keep in mind, code isn't mysterious \u2013 every action can be traced and understood.</p>", "relatedLectureIds": "", "feedbacks": [""], "answers": ["<p>Got It!</p>"]}, "correct_response": ["a"], "section": "", "question_plain": "When you encounter a challenging quiz question, it's a good idea to apply the same logic in Visual Studio Code. Use breakpoints to step through the code and visualize the process line by line. Keep in mind, code isn't mysterious \u2013 every action can be traced and understood.", "related_lectures": []}, {"_class": "assessment", "id": 32218606, "assessment_type": "multiple-choice", "prompt": {"feedbacks": ["Careful, price is a double.", "", ""], "relatedLectureIds": "", "question": "<p>What is the expected output:</p><p><code><strong>Main.java</strong></code><strong> </strong></p><pre class=\"prettyprint linenums\">public class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}</pre><p><code><strong>Shirt.java</strong></code></p><pre class=\"prettyprint linenums\">public class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n\n    }\n}</pre><p><br></p>", "answers": ["<pre class=\"prettyprint linenums\">&gt;&gt;:&nbsp;Brand: null\n&gt;&gt;: Price: 0\n&gt;&gt;: Size: null</pre>", "<pre class=\"prettyprint linenums\">&gt;&gt;:&nbsp;Brand: null\n&gt;&gt;:&nbsp;Price: 0.0\n&gt;&gt;:&nbsp;Size: null</pre>", "<p>This code will not compile</p>"]}, "correct_response": ["b"], "section": "", "question_plain": "What is the expected output:Main.java public class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}Shirt.javapublic class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n\n    }\n}", "related_lectures": []}, {"_class": "assessment", "id": 32218622, "assessment_type": "multiple-choice", "prompt": {"answers": ["<pre class=\"prettyprint linenums\">&gt;&gt;: Brand: null\n&gt;&gt;: Price: 0.0\n&gt;&gt;: Size: null</pre>", "<pre class=\"prettyprint linenums\">&gt;&gt;: Brand: Nike\n&gt;&gt;: Price: 20.99\n&gt;&gt;: Size: null</pre>", "<p>This code doesn't compile</p>"], "question": "<p>What is the expected output:</p><p><code><strong>Main.java</strong></code><strong> </strong></p><pre class=\"prettyprint linenums\">public class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}</pre><p><code><strong>Shirt.java</strong></code></p><pre class=\"prettyprint linenums\">public class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n        this.brand = brand;\n        this.price = price;\n    }\n}</pre><p><br></p>", "relatedLectureIds": "", "feedbacks": ["", "The constructor doesn't update the size field.", ""]}, "correct_response": ["b"], "section": "", "question_plain": "What is the expected output:Main.java public class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}Shirt.javapublic class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n        this.brand = brand;\n        this.price = price;\n    }\n}", "related_lectures": []}, {"_class": "assessment", "id": 32218656, "assessment_type": "multiple-choice", "prompt": {"question": "<p>What is the expected output:</p><p><code><strong>Main.java</strong></code></p><pre class=\"prettyprint linenums\">public class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}</pre><p><code><strong>Shirt.java</strong></code><strong> </strong></p><pre class=\"prettyprint linenums\">public class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n        brand = this.brand;\n        price = this.price;\n    }\n}</pre>", "relatedLectureIds": "", "feedbacks": ["This code is backwards. The constructor updates the parameters instead of the fields. ", "", ""], "answers": ["<pre class=\"prettyprint linenums\">&gt;&gt;: Brand: null\n&gt;&gt;: Price: 0.0\n&gt;&gt;: Size: null</pre>", "<pre class=\"prettyprint linenums\">&gt;&gt;: Brand: Nike\n&gt;&gt;: Price: 20.99\n&gt;&gt;: Size: null</pre>", "<p>This code will not compile.</p>"]}, "correct_response": ["a"], "section": "", "question_plain": "What is the expected output:Main.javapublic class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}Shirt.java public class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n        brand = this.brand;\n        price = this.price;\n    }\n}", "related_lectures": []}, {"_class": "assessment", "id": 32218674, "assessment_type": "multiple-choice", "prompt": {"answers": ["<pre class=\"prettyprint linenums\">&gt;&gt;:&nbsp;Brand: null\n&gt;&gt;:&nbsp;Price: 0.0\n&gt;&gt;: Size: null</pre>", "<pre class=\"prettyprint linenums\">&gt;&gt;: Brand: Nike\n&gt;&gt;: Price: 20.99\n&gt;&gt;:&nbsp;Size: Small</pre>", "<p>This code doesn't compile </p>"], "relatedLectureIds": "", "feedbacks": ["", "The constructor sets each field in the current object equal to a parameter value.", ""], "question": "<p>What is the expected output:</p><p><code><strong>Main.java</strong></code></p><pre class=\"prettyprint linenums\">public class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}</pre><p><code><strong>Shirt.java</strong></code><strong> </strong></p><pre class=\"prettyprint linenums\">public class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n        this.brand = brand;\n        this.price = price;\n        this.size = size;\n\n    }\n}</pre>"}, "correct_response": ["b"], "section": "", "question_plain": "What is the expected output:Main.javapublic class Main {\n    public static void main(String[] args) {\n        Shirt nike = new Shirt(\"Nike\", 20.99, \"Small\");\n\n        System.out.println(\"Brand: \" + nike.brand);\n        System.out.println(\"Price: \" + nike.price);\n        System.out.println(\"Size: \" + nike.size);\n\n    }\n}Shirt.java public class Shirt {\n\n    String brand;\n    double price;\n    String size;\n\n    public Shirt(String brand, double price, String size) {\n        this.brand = brand;\n        this.price = price;\n        this.size = size;\n\n    }\n}", "related_lectures": []}]};
      var correct = 0;
      var total = 0;
      const questionData = quizData.questions
      const passPercent = quizData.pass_percent

      function main() {
        total = questionData.length;

        var questions = [];
        for (var i = 0; i < questionData.length; i++) {
          var question = questionData[i];
          var questionText = question.prompt.question;
          var answers = question.prompt.answers;
          var correctAnswer = question.correct_response[0];
          var correctAnswerText = answers[correctAnswer.charCodeAt(0) - 97];
          var questionObj = {
            question: questionText,
            correctAnswer: correctAnswerText,
            answers: answers,
            id: question.id,
          };
          questions.push(questionObj);
        }

        updateScore();

        // display the questions
        var questionsContainer = document.getElementById("quiz-container");
        for (var i = 0; i < questions.length; i++) {
          var question = questions[i];
          var questionElement = document.createElement("form");
          questionElement.className = "question";
          questionElement.innerHTML =
            "<span>Question " +
            (i + 1) +
            ":</span>" +
            '<div class="question-prompt">' +
            question.question +
            "</div>";
          questionElement.id = question.id;
          questionElement.classList.add("quiz-container");
          var answersElement = document.createElement("ul");
          answersElement.className = "answers";
          for (var j = 0; j < question.answers.length; j++) {
            var answer = question.answers[j];
            var answerElement = document.createElement("li");
            answerElement.className = "answer";
            answerElement.innerHTML =
              '<label for="input-' +
              question.id +
              "-" +
              j +
              '"><div onclick="select(' +
              question.id +
              ", " +
              j +
              ')"><span></span><input id="input-' +
              question.id +
              "-" +
              j +
              '" type="radio" name="question' +
              i +
              '" value="' +
              j +
              '">' +
              answer +
              "</input></div></label>";
            answerElement.classList.add("question-answer");
            answersElement.appendChild(answerElement);
          }

          questionElement.appendChild(answersElement);

          // add a submit button
          var submitButton = document.createElement("button");
          submitButton.className = "submit";
          submitButton.innerHTML = "Submit";
          submitButton.classList.add("submit-button");

          submitButton.addEventListener("click", function (e) {
            e.preventDefault();
            var questionElement = e.target.parentElement;
            var questionId = questionElement.id;
            var question = questions.filter(function (q) {
              return q.id == questionId;
            })[0];

            // set the border color of all answers to black
            var answers = questionElement.getElementsByClassName("answer");
            for (var i = 0; i < answers.length; i++) {
              console.log(answers[i]);
              answers[i].children[0].classList.remove("correct", "incorrect");
            }

            var answer = questionElement.querySelector(
              'input[type="radio"]:checked'
            );
            if (answer) {
              var answerIndex = answer.value;
              var answerText = question.answers[answerIndex];
              if (answerText == question.correctAnswer) {
                answer.parentElement.parentElement.classList.add("correct");
                // 
                correct++;
                updateScore();
              } else {
                answer.parentElement.parentElement.classList.add("incorrect");
                // 
              }
            } else {
              alert("Please select an answer.");
            }
          });

          // add button
          questionElement.appendChild(submitButton);

          questionsContainer.appendChild(questionElement);
        }
      }

      function select(question, answer) {
        var questionElement = document.getElementById(question);
        var answers = questionElement.getElementsByClassName("answer");
        for (var i = 0; i < answers.length; i++) {
          var span = answers[i].children[0].children[0].children[0];
          var input = answers[i].children[0].children[0].children[1];
          span.classList.remove("selected");
          input.checked = false;
        }
        var span = answers[answer].children[0].children[0].children[0];
        var input = answers[answer].children[0].children[0].children[1];
        span.classList.add("selected");
        input.checked = true;
      }

      function updateScore() {
        var scoreElem = document.getElementById("score");
        const score = (correct / total) * 100;
        scoreElem.innerHTML = "Score: " + score.toFixed(0) + "/" + passPercent + "%";
      }
    </script>
  </body>
</html>
