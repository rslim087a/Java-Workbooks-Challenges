<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>

    <link rel="stylesheet" href="quiz-styles.css">
  </head>

  <body onload="main()">
    <a href="../index.html" class="back-button">‚Üê Back</a>    <div id="score" class="score">
      <span>Score: N/A of N/A</span>
    </div>
    <div id="quiz-container" class="quiz-content"></div>

    <script>
      const quizData = {"pass_percent": 70, "questions": [{"_class": "assessment", "id": 30384202, "assessment_type": "multiple-choice", "prompt": {"answers": ["<p>5</p>", "<p>6</p>", "<p>Loop runs forever</p>"], "question": "<pre class=\"prettyprint linenums\">  int number = 0;\n\n   while (true) {\n      number++;\n      if (number &gt; 5) {\n         break;\n      } \n   }\n         \n  System.out.println(number);\n</pre><p><strong>Output:</strong></p>", "feedbacks": ["The loop breaks once number is bigger than 5. ", "When number updates to 6, the loop breaks. After the loop breaks, the updated number prints. ", ""], "relatedLectureIds": ""}, "correct_response": ["b"], "section": "", "question_plain": "int number = 0;\n\n   while (true) {\n      number++;\n      if (number &gt; 5) {\n         break;\n      } \n   }\n         \n  System.out.println(number);\nOutput:", "related_lectures": []}, {"_class": "assessment", "id": 30384240, "assessment_type": "multiple-choice", "prompt": {"question": "<p>Which code will keep asking the user to enter a greeting until they say: \"Hello\":</p><p><code>&gt;&gt;: Hi Timmy, say Hello!</code> </p><p><code>User Input: yo</code></p><p><code>User Input: oi</code></p><p><code>User Input: Hello</code></p><p><code>&gt;&gt;: Hello to you too, Timmy!</code> </p>", "relatedLectureIds": "", "feedbacks": ["Read the condition carefully.", "This loop keeps running, and it breaks once the user enters a greeting that equals Hello. "], "answers": ["<pre class=\"prettyprint linenums\">         System.out.println(\"Hi Timmy, Say Hello\");\n         String greeting = \" \";\n         while (true) {\n            greeting = scan.nextLine();\n            if (!greeting.equals(\"Hello\")) {\n                break;\n            } \n         }\n        System.out.println(\"Hello to you too, Timmy!\");\n</pre>", "<pre class=\"prettyprint linenums\">         System.out.println(\"Hi Timmy, Say Hello\");\n         String greeting = \" \";\n         while (true) {\n            greeting = scan.nextLine();\n            if (greeting.equals(\"Hello\")) {\n                break;\n            }\n         }\n         System.out.println(\"Hello to you too, Timmy!\");\n</pre>"]}, "correct_response": ["b"], "section": "", "question_plain": "Which code will keep asking the user to enter a greeting until they say: \"Hello\":&gt;&gt;: Hi Timmy, say Hello! User Input: yoUser Input: oiUser Input: Hello&gt;&gt;: Hello to you too, Timmy!", "related_lectures": []}, {"_class": "assessment", "id": 30384262, "assessment_type": "multiple-choice", "prompt": {"answers": ["<pre class=\"prettyprint linenums\">8\n6\n4\n2</pre>", "<pre class=\"prettyprint linenums\">9\n7\n5\n3\n1</pre>", "<pre class=\"prettyprint linenums\">1\n3\n5\n7\n9</pre>"], "question": "<pre class=\"prettyprint linenums\">        for (int i=9; i &gt; 0; i--) {\n            if (i%2 == 0) {\n                continue;\n            } \n            System.out.println(i);\n         }</pre><p><strong>Output:</strong></p>", "feedbacks": ["Is the if statement skipping even numbers or odd numbers? ", "During each run, the if statement checks for even numbers and skips the current run. ", ""], "relatedLectureIds": ""}, "correct_response": ["b"], "section": "", "question_plain": "for (int i=9; i &gt; 0; i--) {\n            if (i%2 == 0) {\n                continue;\n            } \n            System.out.println(i);\n         }Output:", "related_lectures": []}, {"_class": "assessment", "id": 30384292, "assessment_type": "multiple-choice", "prompt": {"answers": ["<pre class=\"prettyprint linenums\">9\n7\n5\n3</pre>", "<pre class=\"prettyprint linenums\">9\n7\n5</pre>", "<pre class=\"prettyprint linenums\">9\n7\n5\n3\n1</pre>"], "question": "<pre class=\"prettyprint linenums\">        for (int i=9; i &gt; 0; i--) {\n            if (i%2 == 0) {\n                continue;\n            } else if (i == 3) {\n                break;\n            }\n            System.out.println(i);\n         }</pre><p><strong>Output:</strong></p>", "feedbacks": ["Read the code carefully. Once it detects that the counter equals 3, the loop breaks before it gets the chance to print it. ", "The for loop skips every run where the counter is even. Then, it breaks the loop once the counter equals three. ", ""], "relatedLectureIds": ""}, "correct_response": ["b"], "section": "", "question_plain": "for (int i=9; i &gt; 0; i--) {\n            if (i%2 == 0) {\n                continue;\n            } else if (i == 3) {\n                break;\n            }\n            System.out.println(i);\n         }Output:", "related_lectures": []}, {"_class": "assessment", "id": 30384316, "assessment_type": "multiple-choice", "prompt": {"relatedLectureIds": "", "feedbacks": ["This condition doesn't make sense. Option can't equal two values at once. ", "This code runs forever. continue doesn't break the loop. It only skips the current run.", "1. The while loop runs indefinitely.  2. During each run, it asks the user to enter cash or credit. 3. If the user enters one of these values, the condition is true and the loop breaks. "], "answers": ["<pre class=\"prettyprint linenums\">        String option = \" \";\n        while (true) { \n            System.out.println(\"cash or credit?\");\n            option = scan.nextLine();\n            if (option.equals(\"cash\") &amp;&amp; option.equals(\"credit\")) {\n                break;\n            }\n        }\n        System.out.println(\"Thank you for your business!\");\n</pre>", "<pre class=\"prettyprint linenums\">        String option = \" \";\n        while (true) { \n            System.out.println(\"cash or credit?\");\n            option = scan.nextLine();\n            if (option.equals(\"cash\") || option.equals(\"credit\")) {\n                continue;\n            }\n        }\n        System.out.println(\"Thank you for your business!\");\n</pre>", "<pre class=\"prettyprint linenums\">        String option = \" \";\n        while (true) { \n            System.out.println(\"cash or credit?\");\n            option = scan.nextLine();\n            if (option.equals(\"cash\") || option.equals(\"credit\")) {\n                break;\n            }\n        }\n        System.out.println(\"Thank you for your business!\");</pre>"], "question": "<p>Which code will achieve the following output:</p><p><code>&gt;&gt;: cash or credit?</code></p><p><code><strong>User Input</strong>: dunno</code></p><p><code>&gt;&gt;: cash or credit?</code></p><p><code><strong>User Input</strong>: hmmm...</code></p><p><code>&gt;&gt;:&nbsp;cash or credit?</code></p><p><code><strong>User Input</strong>: cash</code></p><p><code>&gt;&gt;:&nbsp;Thank you for your business!</code> </p>"}, "correct_response": ["c"], "section": "", "question_plain": "Which code will achieve the following output:&gt;&gt;: cash or credit?User Input: dunno&gt;&gt;: cash or credit?User Input: hmmm...&gt;&gt;:&nbsp;cash or credit?User Input: cash&gt;&gt;:&nbsp;Thank you for your business!", "related_lectures": []}]};
      var correct = 0;
      var total = 0;
      const questionData = quizData.questions
      const passPercent = quizData.pass_percent

      function main() {
        total = questionData.length;

        var questions = [];
        for (var i = 0; i < questionData.length; i++) {
          var question = questionData[i];
          var questionText = question.prompt.question;
          var answers = question.prompt.answers;
          var correctAnswer = question.correct_response[0];
          var correctAnswerText = answers[correctAnswer.charCodeAt(0) - 97];
          var questionObj = {
            question: questionText,
            correctAnswer: correctAnswerText,
            answers: answers,
            id: question.id,
          };
          questions.push(questionObj);
        }

        updateScore();

        // display the questions
        var questionsContainer = document.getElementById("quiz-container");
        for (var i = 0; i < questions.length; i++) {
          var question = questions[i];
          var questionElement = document.createElement("form");
          questionElement.className = "question";
          questionElement.innerHTML =
            "<span>Question " +
            (i + 1) +
            ":</span>" +
            '<div class="question-prompt">' +
            question.question +
            "</div>";
          questionElement.id = question.id;
          questionElement.classList.add("quiz-container");
          var answersElement = document.createElement("ul");
          answersElement.className = "answers";
          for (var j = 0; j < question.answers.length; j++) {
            var answer = question.answers[j];
            var answerElement = document.createElement("li");
            answerElement.className = "answer";
            answerElement.innerHTML =
              '<label for="input-' +
              question.id +
              "-" +
              j +
              '"><div onclick="select(' +
              question.id +
              ", " +
              j +
              ')"><span></span><input id="input-' +
              question.id +
              "-" +
              j +
              '" type="radio" name="question' +
              i +
              '" value="' +
              j +
              '">' +
              answer +
              "</input></div></label>";
            answerElement.classList.add("question-answer");
            answersElement.appendChild(answerElement);
          }

          questionElement.appendChild(answersElement);

          // add a submit button
          var submitButton = document.createElement("button");
          submitButton.className = "submit";
          submitButton.innerHTML = "Submit";
          submitButton.classList.add("submit-button");

          submitButton.addEventListener("click", function (e) {
            e.preventDefault();
            var questionElement = e.target.parentElement;
            var questionId = questionElement.id;
            var question = questions.filter(function (q) {
              return q.id == questionId;
            })[0];

            // set the border color of all answers to black
            var answers = questionElement.getElementsByClassName("answer");
            for (var i = 0; i < answers.length; i++) {
              console.log(answers[i]);
              answers[i].children[0].classList.remove("correct", "incorrect");
            }

            var answer = questionElement.querySelector(
              'input[type="radio"]:checked'
            );
            if (answer) {
              var answerIndex = answer.value;
              var answerText = question.answers[answerIndex];
              if (answerText == question.correctAnswer) {
                answer.parentElement.parentElement.classList.add("correct");
                // 
                correct++;
                updateScore();
              } else {
                answer.parentElement.parentElement.classList.add("incorrect");
                // 
              }
            } else {
              alert("Please select an answer.");
            }
          });

          // add button
          questionElement.appendChild(submitButton);

          questionsContainer.appendChild(questionElement);
        }
      }

      function select(question, answer) {
        var questionElement = document.getElementById(question);
        var answers = questionElement.getElementsByClassName("answer");
        for (var i = 0; i < answers.length; i++) {
          var span = answers[i].children[0].children[0].children[0];
          var input = answers[i].children[0].children[0].children[1];
          span.classList.remove("selected");
          input.checked = false;
        }
        var span = answers[answer].children[0].children[0].children[0];
        var input = answers[answer].children[0].children[0].children[1];
        span.classList.add("selected");
        input.checked = true;
      }

      function updateScore() {
        var scoreElem = document.getElementById("score");
        const score = (correct / total) * 100;
        scoreElem.innerHTML = "Score: " + score.toFixed(0) + "/" + passPercent + "%";
      }
    </script>
  </body>
</html>
